(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{104:function(e,t){e.exports={APIKey:""}},123:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(33),s=a.n(r),i=a(32),o=a(3),l="SEARCH_MOVIE",d="FETCH_MOVIES",u="FETCH_MOVIE",b="FETCH_ALL_MOVIE",j="LOADING1",m="LOADING",p="FETCH_ALL_MOVIE_CRUD",h="FINISH",v="[Auth] Login",O="[Auth] Logout",x="[Auth] recover password",f="[ui] Set Error",g="[ui] Remuve Error",y="[ui] Start Login",N="[ui] Finish Login",w="[ui] Stop Login",k={text:"",movies:[],loading:!1,movie:[]},C=a(31),_={finish:!1,loading:!1,movie:[],allmovies:[]},E={loading:!1,msjError:null},S={moviesCrud:[]},I=a(58),L=Object(i.b)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{text:t.payload,loading:!1});case d:return Object(o.a)(Object(o.a)({},e),{},{movies:t.payload?t.payload:[],loading:!1});case u:return Object(o.a)(Object(o.a)({},e),{},{movie:t.payload,loading:!1,text:""});case m:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});default:return e}},allMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{},{allmovies:[].concat(Object(C.a)(e.allmovies),Object(C.a)(t.payload)),loading:!1});case h:return Object(o.a)(Object(o.a)({},e),{},{finish:!0,loading:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{uid:t.payload.uid,name:t.payload.displayName,photoURL:t.payload.photoURL};case O:return{};case x:return Object(o.a)(Object(o.a)({},e),{},{recover:!0});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{msjError:t.payload});case g:return Object(o.a)(Object(o.a)({},e),{},{msjError:null});case y:case N:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case w:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});default:return e}},moviesCrud:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{moviesCrud:Object(C.a)(t.payload)};default:return e}}}),R="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,D=Object(i.d)(L,R(Object(i.a)(I.a))),A=a(7),T=(a(67),a(6)),M=a.n(T),B=a(8),F=a(13),P=a(12),U=a(9),V=a(27);a(124),a(69);V.a.initializeApp({apiKey:"AIzaSyC-YfClg9OLZTRebYBd1k84xG2hNKXn_Ms",authDomain:"movies-c1491.firebaseapp.com",projectId:"movies-c1491",storageBucket:"movies-c1491.appspot.com",messagingSenderId:"783358727896",appId:"1:783358727896:web:830b1c23b89575984529ad"});var Y=V.a.firestore(),W=new V.a.auth.GoogleAuthProvider,q=new V.a.auth.FacebookAuthProvider,G=a(23),H=a.n(G),z=function(e,t,a){return{type:v,payload:{uid:e,displayName:t,photoURL:a}}};function X(e){H.a.fire({position:"center",icon:"error",title:e,showConfirmButton:!1,timer:1500})}var K=function(e,t){return function(a){return a({type:y}),V.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;console.log("photo",t.photoURL),a(z(t.uid,t.displayName,t.photoURL)),a({type:N})})).catch((function(e){X(e.message),a({type:w})}))}},J=function(e){return function(t){return V.a.auth().sendPasswordResetEmail(e).then((function(){t({type:x}),H.a.fire({position:"center",icon:"success",title:"Enviamos a su correo el enlace para restablecer su contrase\xf1a",showConfirmButton:!1,timer:2200})})).catch((function(e){console.log(e.message),H.a.fire({position:"center",icon:"error",title:"Correo no invalido, ingrese su direcci\xf3n de correo electronico",showConfirmButton:!1,timer:2e3})}))}},Z=function(){return function(e){V.a.auth().signOut(),e({type:O})}},Q=a(37),$=a(18),ee=a.n($),te=a(1),ae=["isAuthenticated","component"],ne=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Q.a)(e,ae);return Object(te.jsx)(U.b,Object(o.a)(Object(o.a)({},n),{},{component:function(e){return t?Object(te.jsx)(U.a,{to:"/"}):Object(te.jsx)(a,Object(o.a)({},e))}}))};ne.prototype={isAuthenticated:ee.a.bool.isRequired,component:ee.a.func.isRequired};var ce=ne,re=["isAuthenticated","component"],se=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Q.a)(e,re);return Object(te.jsx)(U.b,Object(o.a)(Object(o.a)({},n),{},{component:function(e){return t?Object(te.jsx)(a,Object(o.a)({},e)):Object(te.jsx)(U.a,{to:"/login"})}}))};se.prototype={isAuthenticated:ee.a.bool.isRequired,component:ee.a.func.isRequired};var ie=se,oe=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.toLowerCase(),e.next=3,Y.collection("movies").get();case 3:return n=e.sent,c=[],n.forEach((function(e){var t;c.length<15&&(console.log(e.data().original_title),(null===(t=e.data().original_title)||void 0===t?void 0:t.toLowerCase().includes(a))&&c.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})))})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Y.collection("movies").doc(t),e.next=4,a.get();case 4:if(!(n=e.sent)){e.next=9;break}return e.abrupt("return",n.data());case 9:console.log("No such document!");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error ==> ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),de=null;de||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;Math.floor(Math.random()*(t-e+1)+e)}();var ue=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.collection("movies").orderBy("popularity").startAfter(de||0).limit(16),e.next=3,t.get();case 3:return a=e.sent,n=[],a.docs.forEach((function(e){n.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),a.empty||(de=a.docs[a.docs.length-1]),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){return{type:h}},je=a(36),me=a.n(je),pe=function(e){var t=e.movie,a=t.release_date;return Object(te.jsxs)("div",{className:"col-md-3 mb-1",style:{position:"relative"},children:[Object(te.jsxs)("div",{className:"p-0 m-0 border-start-0 rounded-pill  rounded-start border border-warning \r d-flex justify-content-evenly align-items-center fs-3",style:{zIndex:"2000",position:"relative",top:"85px",left:"0",height:"55px",width:"100px",color:"#fff",background:"rgba(0 ,0 ,0 ,.7)"},children:[Object(te.jsx)("i",{className:"fas fa-star text-warning  fs-3"}),t.vote_average]}),Object(te.jsx)(P.b,{style:{textDecoration:"none"},to:"/movie/"+t.id,children:Object(te.jsxs)("div",{className:"card card-body bg-dark text-center  p-0",style:{position:"relative"},children:[Object(te.jsx)("div",{className:"two d-flex justify-content-center align-items-center ",style:{background:"rgba(0,0,0,.1"},children:Object(te.jsx)("i",{className:"fas fa-play-circle text-warning",style:{fontSize:"64px"}})}),Object(te.jsx)("img",{className:"w-100 mb-2",src:t.video?t.poster_path:"https://image.tmdb.org/t/p/w500"+t.poster_path,alt:"Movie Cover"}),Object(te.jsxs)("h5",{className:"text-light card-title",children:[t.title.substring(0,16)," - ",Object(te.jsx)(me.a,{format:"D MMM YYYY",date:a})]})]})})]})},he=(a(85),function(){return Object(te.jsx)("div",{children:Object(te.jsx)("div",{className:"loader",children:"Loading..."})})}),ve=function(){return Object(te.jsxs)("div",{id:"carouselExampleIndicators",className:"carousel slide","data-bs-ride":"carousel",children:[Object(te.jsxs)("div",{className:"carousel-indicators",children:[Object(te.jsx)("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",className:"active","aria-current":"true","aria-label":"Slide 1"}),Object(te.jsx)("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"1","aria-label":"Slide 2"}),Object(te.jsx)("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"2","aria-label":"Slide 3"})]}),Object(te.jsxs)("div",{className:"carousel-inner",children:[Object(te.jsx)("div",{className:"carousel-item active",children:Object(te.jsx)("img",{src:"https://i.ibb.co/Ptddh5V/mulan.png",className:"d-block w-100",alt:"..."})}),Object(te.jsx)("div",{className:"carousel-item ",children:Object(te.jsx)("img",{src:"https://i.ibb.co/jD2ST90/covers-dd-1.png",className:"d-block w-100 img-fluid",alt:"..."})}),Object(te.jsx)("div",{className:"carousel-item",children:Object(te.jsx)("img",{src:"https://i.ibb.co/XSMFXnH/unidos.png",className:"d-block w-100",alt:"..."})})]}),Object(te.jsxs)("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[Object(te.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(te.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),Object(te.jsxs)("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[Object(te.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(te.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})},Oe=function(){var e=Object(A.b)(),t=Object(n.useRef)(),a=Object(A.c)((function(e){return e.allMovies})),c=a.allmovies,r=a.loading,s=a.finish,i=new IntersectionObserver((function(t){t[0].isIntersecting&&(s||setTimeout((function(){e(function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:if(0!==(a=e.sent).length){e.next=7;break}t(be()),e.next=8;break;case 7:return e.abrupt("return",t({type:b,payload:a}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e({type:j})}),300))}),{rootMargin:"0px 0px 1000px 0px",threshold:.9});return Object(n.useEffect)((function(){return i.observe(t.current),function(){i.disconnect()}}),[]),Object(te.jsxs)("div",{style:{background:"#111",color:"#fff"},children:[Object(te.jsx)(ve,{}),Object(te.jsx)("h2",{className:"mt-3 ms-4 ",children:"Todas las peliculas"}),Object(te.jsxs)("div",{className:"row m-2  mb-0",children:[c.length>0&&c.map((function(e){return Object(te.jsx)(pe,{movie:e},e.id)})),r&&!s&&Object(te.jsx)(he,{})]}),Object(te.jsx)("div",{ref:t,style:{padding:"10px",marginTop:"100px"},children:"...."})]})},xe=(a(86),a(104),function(){return{type:m}}),fe=function(){var e=Object(U.g)(),t=Object(A.c)((function(e){return e.movies})).text,a=Object(A.b)();return Object(te.jsxs)("form",{id:"searchForm",onSubmit:function(n){n.preventDefault(),t.trim().length>0&&(e.push("/search"),a(function(e){return function(){var t=Object(B.a)(M.a.mark((function t(a){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e);case 2:n=t.sent,a({type:d,payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),a(xe()))},className:"d-flex",style:{width:"100%",maxWidth:"500px"},children:[Object(te.jsx)("input",{className:"form-control  rounded-0 rounded-start border-warning border-end-0",type:"search",placeholder:"Busca tu pelicula favorita",onChange:function(e){a(function(e){return function(t){t({type:l,payload:e})}}(e.target.value))},"aria-label":"Busca tu pelicula favorita"}),Object(te.jsx)("button",{className:"btn btn-outline-warning rounded-0 rounded-end",type:"submit",children:Object(te.jsx)("i",{className:"far fa-search"})})]})},ge=function(e){var t=e.isLoggedIn;return Object(te.jsx)("nav",{className:" navbar navbar-expand-lg navbar-dark bg-dark",children:Object(te.jsxs)("div",{className:"container-fluid",children:[Object(te.jsx)(P.b,{className:"navbar-brand",to:"/login",children:Object(te.jsx)("img",{src:" https://i.ibb.co/MZtfLzT/logo-block-Buster.png",alt:"",height:"50px"})}),Object(te.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(te.jsx)("span",{className:"navbar-toggler-icon"})}),Object(te.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(te.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsx)(P.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Todas"})}),Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsx)(P.b,{className:"nav-link active",to:"/",children:"M\xe1s valoradas"})}),Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsx)(P.b,{className:"nav-link active",to:"/",children:"Menos valoradas"})}),Object(te.jsx)("li",{className:"nav-item",children:t&&Object(te.jsx)(P.b,{style:{textDecoration:"none"},className:" nav-link active",to:"/admin",tabIndex:"-1","aria-disabled":"true",children:"Admin\xa0"})})]}),Object(te.jsx)(fe,{})]})]})})},ye=function(){var e=Object(A.c)((function(e){return e.movies})).text;return Object(te.jsxs)("div",{className:"text-center",children:[Object(te.jsx)("img",{className:"img-fluid",src:"https://i.ibb.co/s1xp7N5/Frame-29.png",alt:""}),Object(te.jsxs)("p",{children:["No se encontraron resultados para \u201c",e,"\u201d"]})]})},Ne=function(){var e=Object(A.c)((function(e){return e.movies})).movies;return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h2",{className:"mt-4 mb-3",children:"Resultados de busqueda"}),Object(te.jsxs)("div",{className:"row  d-flex justify-content-evenly ",children:[e.map((function(e,t){return Object(te.jsx)(pe,{movie:e},t)})),0===e.length&&Object(te.jsx)(ye,{})]})]})},we=function(){var e=Object(A.c)((function(e){return e.movies})).loading;return Object(te.jsxs)("div",{children:[Object(te.jsx)(ve,{}),Object(te.jsx)("div",{className:"container",children:e?Object(te.jsx)(he,{}):Object(te.jsx)(Ne,{})})]})},ke=a(59),Ce=a.n(ke),_e=function(e){var t=e.url,a=Object(n.useState)({url:"",display:"none"}),c=Object(F.a)(a,2),r=c[0],s=c[1];return Object(te.jsxs)("div",{children:[Object(te.jsx)("button",{type:"button",className:"btn btn-primary mt-2 w-100 mb-5",onClick:function(){return s(Object(o.a)(Object(o.a)({},r),{},{url:t,display:"flex"}))},children:"Ver trailer"}),Object(te.jsx)("div",{style:{position:"fixed",background:"rgba(0,0,0,0.6)",top:"0",left:"0",right:"0",bottom:"0",margin:"0",textAlign:"center",justifyContent:"center",display:r.display,alignItems:"center"},children:Object(te.jsxs)("div",{style:{maxWidth:"900px",width:"100%",display:"flex",flexDirection:"column",background:"#000",color:"#fff"},children:[Object(te.jsxs)("div",{style:{cursor:"pointer",width:"inherit",marginTop:"10px"},className:"d-flex justify-content-between fs-4 p-2  ",children:[Object(te.jsx)("div",{children:"Reproducir trailer"}),Object(te.jsx)("div",{className:"",onClick:function(){s(Object(o.a)(Object(o.a)({},r),{},{url:"",display:"none"}))},children:"Cerrar X"})]}),Object(te.jsx)(Ce.a,{playing:!0,url:r.url,controls:!0,width:"100%",height:"90vh"})]})})]})},Ee=function(e){var t=Object(A.b)(),a=Object(A.c)((function(e){return e.movies})),c=a.movie,r=a.loading;return Object(n.useEffect)((function(){var a;t((a=e.match.params.id,function(){var e=Object(B.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(a);case 2:n=e.sent,t({type:u,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t(xe())}),[]),Object(te.jsxs)(te.Fragment,{children:[" ",c?Object(te.jsx)("div",{className:"container",children:r?Object(te.jsx)(he,{}):Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("div",{className:"row",children:[Object(te.jsx)("div",{className:"col-md-4 card card-body",children:Object(te.jsx)("img",{src:(null===c||void 0===c?void 0:c.video)?null===c||void 0===c?void 0:c.poster_path:"https://image.tmdb.org/t/p/w500"+(null===c||void 0===c?void 0:c.poster_path),className:"thumbnail",alt:"Poster"})}),Object(te.jsx)("div",{className:"col-md-8",children:Object(te.jsxs)("ul",{className:"list-group mt-4",children:[Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Title:"})," ",null===c||void 0===c?void 0:c.title]}),Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Original_language:"})," ",null===c||void 0===c?void 0:c.original_language]}),Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Overview:"})," ",null===c||void 0===c?void 0:c.overview]}),Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Popularity:"})," ",null===c||void 0===c?void 0:c.popularity]}),Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Release_date:"})," ",Object(te.jsx)(me.a,{format:"D MMM YYYY",date:null===c||void 0===c?void 0:c.release_date})]}),Object(te.jsxs)("li",{className:"list-group-item",children:[Object(te.jsx)("strong",{children:"Vote_average:"})," ",null===c||void 0===c?void 0:c.vote_average]})]})})]}),Object(te.jsx)("div",{className:"row",children:Object(te.jsx)(_e,{url:c.url_video,style:{zIndex:"1000"}})})]})}):Object(te.jsx)("div",{className:"container bg-success m-5 fs-1 p-5 text-center",children:"Esta pagina no existe"})]})},Se=null,Ie=function(e){return function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Y.collection("movies").orderBy("title").startAfter(Se||0).limit(10),e.next=3,a.get();case 3:return n=e.sent,c=[],n.forEach((function(e){c.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),n.empty||(Se=n.docs[n.docs.length-1]),e.abrupt("return",t({type:p,payload:c}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Le=a(26),Re=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.a.fire({position:"top-end",icon:"success",title:"Por favor espere...",showConfirmButton:!1}),"https://api.cloudinary.com/v1_1/dyv10jgjo/auto/upload",(a=new FormData).append("upload_preset","notas-academia"),a.append("file",t),e.prev=5,e.next=8,fetch("https://api.cloudinary.com/v1_1/dyv10jgjo/auto/upload",{method:"POST",body:a});case 8:if(!(n=e.sent).ok){e.next=17;break}return e.next=12,n.json();case 12:return c=e.sent,console.log("data",c),e.abrupt("return",c.secure_url);case 17:return e.next=19,n.json();case 19:throw e.sent;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(5),e.t0;case 25:case"end":return e.stop()}}),e,null,[[5,22]])})));return function(t){return e.apply(this,arguments)}}(),De={title:"",overview:"",poster_path:"",release_date:"",video:!0,url_video:"",id:null},Ae={imgSrc:""},Te={videoSrc:""},Me={image:!1,video:!1},Be=null,Fe=null,Pe=function(e){var t=e.createData,a=e.updateData,c=e.dataToEdit,r=e.setDataToEdit,s=Object(n.useState)(De),i=Object(F.a)(s,2),l=i[0],d=i[1],u=Object(n.useState)(Ae),b=Object(F.a)(u,2),j=b[0],m=b[1],p=Object(n.useState)(Te),h=Object(F.a)(p,2),v=h[0],O=h[1],x=Object(n.useState)(Me),f=Object(F.a)(x,2),g=f[0],y=f[1],N=function(e){d(Object(o.a)(Object(o.a)({},l),{},Object(Le.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){d(c||De)}),[c]);var w=function(){var e=Object(B.a)(M.a.mark((function e(n){var c,r,s,i,d,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),l.title.trim()){e.next=4;break}return alert("Datos incompletos"),e.abrupt("return");case 4:if(c=g.image,r=g.video,s=l.poster_path,i=l.url_video,!c){e.next=12;break}return e.next=9,Re(Be);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=s;case 13:if(d=e.t0,!r){e.next=20;break}return e.next=17,Re(Fe);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1=i;case 21:u=e.t1,console.log("Completado..."),console.log(d),console.log(u),console.log("-------------"),null===l.id?t(Object(o.a)(Object(o.a)({},l),{},{poster_path:d,url_video:u})):a(l.id,Object(o.a)(Object(o.a)({},l),{},{poster_path:d,url_video:u})),k();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){d(De),r(null),y(Me),m(Ae),O(Te),Be=null,Fe=null};return Object(te.jsxs)("div",{children:[Object(te.jsx)("h3",{children:c?"Editar":"Agregar"}),Object(te.jsxs)("form",{onSubmit:w,children:[Object(te.jsx)("input",{type:"text",className:"form-control mt-2",name:"title",id:"",value:l.title,onChange:N,placeholder:"Title"}),Object(te.jsx)("textarea",{type:"text",className:"form-control mt-2",name:"overview",value:l.overview,onChange:N,placeholder:"Overview"}),Object(te.jsx)("input",{type:"date",className:"form-control mt-2",name:"release_date",value:l.release_date,onChange:N,placeholder:"Overview"}),Object(te.jsx)("input",{id:"fileSelector2",type:"file",name:"fileImage",style:{display:"none"},onChange:function(e){var t=Be;if(Be=e.target.files[0]){var a=Be.type;a=URL.createObjectURL(Be),m({imgSrc:a}),y(Object(o.a)(Object(o.a)({},g),{},{image:!0}))}else Be=t}}),Object(te.jsxs)("div",{className:"row mt-2",children:[Object(te.jsx)("div",{className:"col-5",children:Object(te.jsx)("img",{src:c?l.poster_path:j.imgSrc,alt:"Image Preview",width:"100%"})}),Object(te.jsx)("div",{className:"col-7",children:Object(te.jsx)("button",{className:"btn btn-primary w-100  mt-2",type:"button",onClick:function(){document.querySelector("#fileSelector2").click()},children:"Cargar imagen"})})]}),Object(te.jsxs)("div",{className:"row mt-2",children:[Object(te.jsx)("div",{className:"col-5",children:Object(te.jsx)("video",{src:c?l.url_video:v.videoSrc,autoPlay:!0,loop:!0,controls:!0,width:"100%"})}),Object(te.jsxs)("div",{className:"col-7",children:[Object(te.jsx)("input",{id:"fileSelector3",type:"file",name:"fileVideo",style:{display:"none"},onChange:function(e){var t=Fe;if(Fe=e.target.files[0]){var a=Fe.type;a=URL.createObjectURL(Fe),O({videoSrc:a}),y(Object(o.a)(Object(o.a)({},g),{},{video:!0}))}else Fe=t}}),Object(te.jsx)("button",{className:"btn btn-primary w-100 ",type:"button",onClick:function(e){document.querySelector("#fileSelector3").click()},children:"Cargar video"})]})]}),Object(te.jsxs)("div",{className:"d-flex ",children:[Object(te.jsx)("input",{type:"submit",name:"",className:"btn btn-primary form-control m-2"}),Object(te.jsx)("input",{type:"reset",name:"",className:"btn btn-danger form-control m-2",onClick:k})]})]})]})},Ue=function(e){var t=e.setDataToEdit,a=e.deleteData,n=Object(A.c)((function(e){return e.moviesCrud})).moviesCrud;return Object(te.jsx)("div",{className:"col-12",children:Object(te.jsxs)("table",{className:"table  text-center",children:[Object(te.jsx)("thead",{children:Object(te.jsxs)("tr",{children:[Object(te.jsx)("th",{scope:"col",children:"Title"}),Object(te.jsx)("th",{scope:"col",children:"Valoracion"}),Object(te.jsx)("th",{scope:"col",children:"Accion"})]})}),Object(te.jsx)("tbody",{children:n.map((function(e){return Object(te.jsxs)("tr",{children:[Object(te.jsx)("td",{scope:"row",children:e.title}),Object(te.jsx)("td",{children:e.vote_average}),Object(te.jsxs)("td",{children:[Object(te.jsx)("button",{className:"btn btn-success me-3 ",onClick:function(){return t(e)},children:"Editar"}),Object(te.jsx)("button",{className:"btn btn-danger ",onClick:function(){return a(e.id)},children:"Eliminar"})]})]},e.id)}))})]})})},Ve=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.auth.name})),a=Object(n.useState)(null),c=Object(F.a)(a,2),r=c[0],s=c[1],i=Object(A.c)((function(e){return e.auth.photoURL}));return Object(te.jsx)("div",{className:"container",children:Object(te.jsxs)("div",{className:"row justify-content-start",children:[Object(te.jsxs)("div",{className:"col-md-3 text-center m-2",children:[Object(te.jsx)("img",{src:i,alt:"",className:"img-fluid"}),Object(te.jsx)("h3",{className:"card-title",children:t}),Object(te.jsx)(P.b,{to:"/login",children:Object(te.jsx)("button",{className:"btn btn-xs  btn-outline-danger mt-1",onClick:function(){e(Z())},children:"Cerrar sesion"})})]}),Object(te.jsx)("div",{className:"col-sm-12 col-md-8 mt-3",children:Object(te.jsx)(Pe,{createData:function(t){e(function(e){var t=e.title,a=e.overview,n=e.poster_path,c=e.release_date,r=e.url_video;return function(){var e=Object(B.a)(M.a.mark((function e(s,i){var o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={original_language:"en",original_title:t,overview:a,popularity:.173,poster_path:n,release_date:c,title:t,video:!1,vote_average:8.7,vote_count:1242,url_video:r},e.next=3,Y.collection("movies").add(o);case 3:H.a.fire({position:"top-end",icon:"success",title:"Add",showConfirmButton:!1,timer:1500}),s(Ie());case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}(t))},updateData:function(t,a){e(function(e,t){return function(){var a=Object(B.a)(M.a.mark((function a(n,c){var r;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Y.collection("movies").doc(e),a.abrupt("return",r.update(Object(o.a)({},t)).then((function(){console.log("Document successfully updated!"),n(Ie())})).catch((function(e){console.error("Error updating document: ",e)})));case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},dataToEdit:r,setDataToEdit:s})}),Object(te.jsx)("div",{className:"row",children:Object(te.jsx)(Ue,{setDataToEdit:s,deleteData:function(t){window.confirm("Est\xe1s seguro de eliminar la pelicula?")&&e(function(e){return function(){var t=Object(B.a)(M.a.mark((function t(a,n){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.collection("movies").doc(e).delete();case 2:H.a.fire({position:"top-end",icon:"success",title:"Delete",showConfirmButton:!1,timer:1500}),a(Ie());case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t))}})}),Object(te.jsx)("button",{className:"btn btn-info m-4",onClick:function(){return e(Ie())},children:"Siguiente"})]})})},Ye=function(e){var t=e.email,a=e.password,n=e.handleInputChange,c=e.handleLogin,r=e.handleGoogle,s=e.loading,i=e.handleFacebook,o=e.handleRecover;return Object(te.jsx)("div",{className:"form-signin d-flex justify-content-center",children:Object(te.jsxs)("form",{className:"text-center mt-5 p-3 border",onSubmit:c,style:{minWidth:"350px"},children:[Object(te.jsx)("h3",{children:" Iniciar sesi\xf3n "}),Object(te.jsxs)("div",{className:"d-flex justify-content-between mt-3 mb-3",children:[Object(te.jsx)("button",{type:"button",onClick:r,style:{background:"#4C8BF5",minWidth:"150px"},className:"btn btn-primary ",children:"Google\xa0"}),Object(te.jsx)("button",{type:"button",style:{background:"#3A5998",minWidth:"150px"},className:"btn btn-secondary ",onClick:i,children:"Facebook\xa0"})]}),Object(te.jsx)("div",{className:"mb-3 mt-4",children:Object(te.jsx)("input",{type:"email",name:"email",value:t,onChange:n,className:"form-control",placeholder:"Direcci\xf3n de correo electr\xf3nico"})}),Object(te.jsx)("div",{className:"mb-3",children:Object(te.jsx)("input",{type:"password",className:"form-control",name:"password",value:a,onChange:n,placeholder:"Contrase\xf1a"})}),Object(te.jsx)("div",{className:"d-grid gap-1",children:Object(te.jsx)("button",{className:"btn btn-primary",disabled:s,type:"submit",children:"Iniciar sesi\xf3n"})}),Object(te.jsx)("div",{className:"mt-3",children:Object(te.jsx)("p",{type:"button",className:"btn m-0","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:"\xbfOlvidaste tu contrase\xf1a?"})}),Object(te.jsxs)("div",{className:"checkbox  mt-2 ",children:["\xbfNo tienes una cuenta?\xa0",Object(te.jsx)(P.b,{to:"/registro",children:"Reg\xedstrate"})]}),Object(te.jsx)("div",{className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(te.jsx)("div",{className:"modal-dialog",children:Object(te.jsxs)("div",{className:"modal-content",children:[Object(te.jsxs)("div",{className:"modal-header",children:[Object(te.jsx)("h5",{className:"modal-title",id:"staticBackdropLabel",children:"Restablecer contrase\xf1a"}),Object(te.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(te.jsx)("div",{className:"modal-body",children:Object(te.jsx)("input",{type:"email",name:"email",value:t,onChange:n,className:"form-control",placeholder:"Direcci\xf3n de correo electr\xf3nico"})}),Object(te.jsxs)("div",{className:"modal-footer",children:[Object(te.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancelar"}),Object(te.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:o,children:"Restablecer contrase\xf1a"})]})]})})}),Object(te.jsx)("p",{className:" mt-1 text-muted",children:"\xa9 2021"})]})})},We=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.ui})).loading,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(F.a)(t,2),c=a[0],r=a[1];return[c,function(e){var t=e.target;r(Object(o.a)(Object(o.a)({},c),{},Object(Le.a)({},t.name,t.value)))},function(){r(e)}]}({email:"",password:""}),c=Object(F.a)(a,2),r=c[0],s=c[1],i=r.email,l=r.password;return Object(te.jsx)("div",{children:Object(te.jsx)(Ye,{email:i,password:l,handleInputChange:s,handleLogin:function(t){t.preventDefault(),e(K(i,l))},handleGoogle:function(){e((function(e){V.a.auth().signInWithPopup(W).then((function(t){var a=t.user;console.log("photo",a.photoURL),e(z(a.uid,a.displayName,a.photoURL))})).catch((function(e){X(e.message)}))}))},loading:t,handleFacebook:function(){e((function(e){V.a.auth().signInWithPopup(q).then((function(t){var a=t.user;console.log(a),e(z(a.uid,a.displayName,a.photoURL)),console.log(a)})).catch((function(e){X(e.message)}))}))},handleRecover:function(t){t.preventDefault(),e(J(i))}})})},qe=function(){var e=Object(n.useState)(!0),t=Object(F.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(!1),r=Object(F.a)(c,2),s=r[0],i=r[1],o=Object(A.b)();return Object(n.useEffect)((function(){V.a.auth().onAuthStateChanged(function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.uid)?(o(z(t.uid,t.displayName,t.photoURL)),i(!0)):i(!1),a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o,a]),Object(te.jsx)(P.a,{children:Object(te.jsxs)("div",{children:[Object(te.jsx)(ge,{isLoggedIn:s}),Object(te.jsxs)(U.d,{children:[Object(te.jsx)(U.b,{exact:!0,path:"/",component:Oe}),Object(te.jsx)(ce,{exact:!0,path:"/login",component:We,isAuthenticated:s}),Object(te.jsx)(U.b,{exact:!0,path:"/search",component:we}),Object(te.jsx)(U.b,{exact:!0,path:"/movie/:id",component:Ee}),Object(te.jsx)(ie,{exact:!0,path:"/admin",isAuthenticated:s,component:Ve}),Object(te.jsx)(U.a,{to:"/"})]})]})})};s.a.render(Object(te.jsx)(c.a.StrictMode,{children:Object(te.jsx)(A.a,{store:D,children:Object(te.jsx)(qe,{})})}),document.getElementById("root"))},67:function(e,t,a){},85:function(e,t,a){}},[[123,1,2]]]);
//# sourceMappingURL=main.2313992e.chunk.js.map